server {
  listen 9000;
  server_name localhost;

  # Serve welcome app at /
  root /usr/share/nginx/html;

  # Try files for SPA, fall back to index.html of the appropriate app
  location / {
    try_files $uri $uri/ /index.html;
  }

  location /farmer/ {
    alias /usr/share/nginx/html/farmer/;
    try_files $uri $uri/ /farmer/index.html;
  }

  location /auditor/ {
    alias /usr/share/nginx/html/auditor/;
    try_files $uri $uri/ /auditor/index.html;
  }

  location /regulator/ {
    alias /usr/share/nginx/html/regulator/;
    try_files $uri $uri/ /regulator/index.html;
  }

  location /retail/ {
    alias /usr/share/nginx/html/retail/;
    try_files $uri $uri/ /retail/index.html;
  }

  location /laboratory/ {
    alias /usr/share/nginx/html/laboratory/;
    try_files $uri $uri/ /laboratory/index.html;
  }

  # Optional: static asset caching
  location ~* \.(?:css|js|json|svg|png|jpg|jpeg|gif|ico)$ {
    add_header Cache-Control "public, max-age=31536000, immutable";
    try_files $uri =404;
  }

  error_page  404              /index.html;
}
